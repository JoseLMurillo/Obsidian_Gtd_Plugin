/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// modals/processInboxModal.ts
var import_obsidian = require("obsidian");
var ProcessInboxModal = class extends import_obsidian.Modal {
  constructor(app, tasks) {
    super(app);
    this.selectedFolder = "default";
    this.selectedFile = "default";
    this.tasks = tasks;
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Tasks" });
    for (let task of this.tasks) {
      const taskDiv = contentEl.createDiv();
      taskDiv.createEl("p", { text: task });
      new import_obsidian.Setting(taskDiv).setName("Select the destination").addDropdown((dropdown) => {
        dropdown.addOption("default", "");
        dropdown.addOption("1. Projects", "Projects");
        dropdown.addOption("2. Stay", "Stay");
        dropdown.addOption("3. Someday", "Someday");
        dropdown.addOption("Follow", "Follow");
        let fileDropdown = new import_obsidian.Setting(taskDiv);
        let fileName = new import_obsidian.Setting(taskDiv);
        let tag = new import_obsidian.Setting(taskDiv);
        let time = new import_obsidian.Setting(taskDiv);
        let date = new import_obsidian.Setting(taskDiv);
        let hour = new import_obsidian.Setting(taskDiv);
        dropdown.onChange(async (value) => {
          this.selectedFolder = value;
          fileDropdown.setName("").clear();
          fileName.setName("").clear();
          tag.setName("").clear();
          time.setName("").clear();
          date.setName("").clear();
          hour.setName("").clear();
          if (value !== "Follow" && value !== "default") {
            const files = await this.app.vault.adapter.list(`GTD/${value}`);
            if (files.files) {
              fileDropdown.setName("Select a project or create a new one").addDropdown((fileDropdown2) => {
                fileDropdown2.addOption("default", "");
                files.files.forEach((file) => {
                  fileDropdown2.addOption(file, this.getLastPart(file));
                });
                fileDropdown2.onChange((fileValue) => {
                  this.selectedFile = fileValue;
                });
              });
            }
          }
          fileName.setName("Project name if you do not have one selected").addText((text) => {
            text.onChange((value2) => {
              this.newFileName = value2;
            });
          });
          tag.setName("Tag").addText((text) => {
            text.onChange((value2) => {
              this.taskTag = value2;
            });
          }).settingEl.setAttribute("required", "true");
          time.setName("Duration time").addText((text) => {
            text.onChange((value2) => {
              this.taskTime = value2;
            });
          });
          date.setName("Date").addText((text) => {
            text.inputEl.setAttribute("type", "date");
            text.onChange((value2) => {
              this.taskDate = value2;
            });
          });
          hour.setName("Hour").addText((text) => {
            text.inputEl.setAttribute("type", "time");
            text.onChange((value2) => {
              this.taskHour = value2;
            });
          });
        });
        taskDiv.createEl("button", { text: "Process" }).addEventListener("click", () => {
          this.processTask(task);
          taskDiv.empty();
        });
      });
    }
  }
  getLastPart(text) {
    try {
      const lastSlashIndex = text.lastIndexOf("/");
      if (lastSlashIndex === -1) {
        return text;
      }
      return text.substring(lastSlashIndex + 1);
    } catch (error) {
      throw error;
    }
  }
  async addTaskToFile(text, filePath) {
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (file instanceof import_obsidian.TFile && text.trim() !== "") {
      try {
        let content = await this.app.vault.read(file);
        const insertPosition = content.indexOf("# Done");
        if (insertPosition !== -1) {
          const before = content.substring(0, insertPosition);
          const after = content.substring(insertPosition);
          content = before + text + "\n" + after;
        } else {
          content += "\n" + text;
        }
        await this.app.vault.modify(file, content);
        new import_obsidian.Notice("Task added");
      } catch (e) {
        new import_obsidian.Notice("ERROR");
        console.log(`Error ${e}`);
      }
    }
  }
  async deleteTaskFromFile(filePath, taskToDelete) {
    try {
      const fileContent = await this.app.vault.adapter.read(filePath);
      const lines = fileContent.split("\n");
      const updatedLines = lines.filter((line) => line.trim() !== taskToDelete.trim());
      const updatedContent = updatedLines.join("\n");
      await this.app.vault.adapter.write(filePath, updatedContent);
      new import_obsidian.Notice(`Task deleted: ${taskToDelete}`);
    } catch (error) {
      console.error("Failed to delete task:", error);
    }
  }
  async createProyect(path, fileName, data) {
    const newFilePath = `GTD/${path}/${fileName}.md`;
    const vault = this.app.vault;
    try {
      await vault.create(newFilePath, `${data}
# Done`);
      new import_obsidian.Notice("New project created successfully");
    } catch (e) {
      new import_obsidian.Notice("Error");
      console.log(`File ${newFilePath} already exists.`);
    }
    return newFilePath;
  }
  async processTask(task) {
    const formattedTask = `${task} #${this.taskTag} **${this.taskTime}** \u{1F4C5} ${this.taskDate} [hour::${this.taskHour}]`;
    try {
      if (this.selectedFolder === "Follow") {
        await this.addTaskToFile(formattedTask, `GTD/${this.selectedFolder}.md`);
      } else if (this.selectedFile === "default") {
        await this.createProyect(this.selectedFolder, this.newFileName, formattedTask);
      } else {
        await this.addTaskToFile(formattedTask, this.selectedFile);
      }
      this.deleteTaskFromFile("GTD/Inbox.md", task);
    } catch (error) {
      console.error("Error handling task:", error);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// modals/addTaskToInboxModal.ts
var import_obsidian2 = require("obsidian");
var AddTaskToInboxModal = class extends import_obsidian2.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Add task" });
    const textComponent = new import_obsidian2.TextComponent(contentEl);
    textComponent.onChange((value) => {
      this.text = value;
    });
    const submitButton = new import_obsidian2.ButtonComponent(contentEl);
    submitButton.setButtonText("Add").onClick(() => {
      addTaskToIbox(this.text, import_obsidian2.TFile);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
async function addTaskToIbox(text, TFile3) {
  const filePath = "GTD/Inbox.md";
  const file = this.app.vault.getAbstractFileByPath(filePath);
  if (file instanceof TFile3 && text.trim() !== "") {
    try {
      text = `- [ ] ${text}`;
      let content = await this.app.vault.read(file);
      const insertPosition = content.indexOf("# Done");
      if (insertPosition !== -1) {
        const before = content.substring(0, insertPosition);
        const after = content.substring(insertPosition);
        content = before + text + "\n" + after;
      } else {
        content += "\n" + text;
      }
      await this.app.vault.modify(file, content);
      return true;
    } catch (e) {
      console.log(`Error ${e}`);
      return false;
    }
  }
}

// modals/processFileModal.ts
var import_obsidian3 = require("obsidian");
var ProcessFileModal = class extends import_obsidian3.Modal {
  constructor(app) {
    super(app);
    this.selectedDestination = "default";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const h2 = contentEl.createEl("h2", { text: "Move or Delete Proyect" });
    const taskDivParent = contentEl.createDiv();
    taskDivParent.style.backgroundColor = "#006C8C";
    const taskDiv = contentEl.createDiv();
    new import_obsidian3.Setting(taskDivParent).setName("Select folder to process").addDropdown((dropdown) => {
      dropdown.addOption("default", "");
      dropdown.addOption("2. Stay", "Stay");
      dropdown.addOption("3. Someday", "Someday");
      dropdown.onChange(async (value) => {
        taskDiv.empty();
        const folderPath = `GTD/${value}`;
        try {
          const files = await this.app.vault.adapter.list(folderPath);
          const fileList = files.files;
          if (fileList.length === 0) {
            contentEl.createEl("p", { text: "No files found in the Someday folder." });
            return;
          }
          for (let task of fileList) {
            taskDiv.createEl("h3", { text: this.getLastPart(task) });
            new import_obsidian3.Setting(taskDiv).setName("Select the destination").addDropdown((dropdown2) => {
              dropdown2.addOption("default", "");
              dropdown2.addOption("1. Projects", "Projects");
              dropdown2.addOption("2. Stay", "Stay");
              dropdown2.addOption("4. Archive", "Archive");
              dropdown2.onChange(async (value2) => {
                this.selectedDestination = value2;
              });
            });
            taskDiv.createEl("button", { text: "Move" }).addEventListener("click", async () => {
              if (task && this.selectedDestination !== "default") {
                await this.moveFile(task, this.selectedDestination);
                taskDiv.empty();
              } else {
                new import_obsidian3.Notice("Please select a file and folder first.");
              }
            });
            const btnDelete = taskDiv.createEl("button", { text: "Delete" });
            btnDelete.style.backgroundColor = "#DA1010";
            btnDelete.addEventListener("click", async () => {
              if (task) {
                await this.deleteFile(task);
                new import_obsidian3.Notice(`Deleted ${task}`);
                taskDiv.empty();
              } else {
                new import_obsidian3.Notice("Please select a file first.");
              }
            });
          }
        } catch (error) {
          console.log(error);
        }
      });
    });
  }
  async moveFile(file, destination) {
    const sourcePath = file;
    const destinationPath = `GTD/${destination}/${this.getLastPart(file)}`;
    const fileContent = await this.app.vault.adapter.read(sourcePath);
    await this.app.vault.create(`${destinationPath}/`, `${fileContent}`);
    await this.deleteFile(file);
  }
  getLastPart(text) {
    try {
      const lastSlashIndex = text.lastIndexOf("/");
      if (lastSlashIndex === -1) {
        return text;
      }
      return text.substring(lastSlashIndex + 1);
    } catch (error) {
      throw error;
    }
  }
  async deleteFile(file) {
    const filePath = file;
    try {
      await this.app.vault.adapter.remove(filePath);
    } catch (error) {
      console.error("Failed to delete file:", error);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// modals/taskManagerModal.ts
var import_obsidian4 = require("obsidian");
var TaskManagerModal = class extends import_obsidian4.Modal {
  constructor(app) {
    super(app);
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Manage Tasks" });
    const folderPaths = ["GTD/1. Projects", "GTD/2. Stay", "GTD/3. Someday"];
    try {
      const tasks = await this.readTasksFromFolders(folderPaths);
      if (tasks.length === 0) {
        contentEl.createEl("p", { text: "No tasks found." });
        return;
      }
      tasks.forEach((task) => {
        this.createTaskElement(task);
      });
    } catch (error) {
      console.error("Failed to read tasks:", error);
      contentEl.createEl("p", { text: "Failed to load tasks." });
    }
  }
  async readTasksFromFolders(folders) {
    const tasks = [];
    for (const folder of folders) {
      const files = await this.app.vault.adapter.list(folder);
      for (const file of files.files) {
        const content = await this.app.vault.adapter.read(file);
        const lines = content.split("\n");
        lines.forEach((line, index) => {
          if (line.match(/- \[ \].*ðŸ“… \d{4}-\d{2}-\d{2}/)) {
            tasks.push({ file, content: line, line: index });
          }
        });
      }
    }
    return tasks;
  }
  createTaskElement(task) {
    const { contentEl } = this;
    const taskEl = contentEl.createEl("div", { cls: "task-item" });
    const dateMatch = task.content.match(/ðŸ“… (\d{4}-\d{2}-\d{2})/);
    if (dateMatch) {
      const taskDate = new Date(dateMatch[1]);
      const currentDate = new Date();
      if (taskDate < currentDate) {
        taskEl.createEl("span", { text: task.content });
        taskEl.createEl("span", { text: " (Overdue)", cls: "overdue" });
        const dateInput = taskEl.createEl("input", { type: "date" });
        dateInput.value = dateMatch[1];
        const updateButton = taskEl.createEl("button", { text: "Update Date" });
        updateButton.addEventListener("click", async () => {
          const newDate = dateInput.value;
          await this.deleteTask(task.file, task.line);
          const updatedContent = task.content.replace(/ðŸ“… \d{4}-\d{2}-\d{2}/, `\u{1F4C5} ${newDate}`);
          await this.updateTask(task.file, task.line, updatedContent);
          new import_obsidian4.Notice("Task date updated.");
          taskEl.empty();
        });
        const deleteButton = taskEl.createEl("button", { text: "Delete Task" });
        deleteButton.style.backgroundColor = "#DA1010";
        deleteButton.addEventListener("click", async () => {
          await this.deleteTask(task.file, task.line);
          new import_obsidian4.Notice("Task deleted.");
          taskEl.empty();
        });
      }
    }
  }
  async updateTask(file, line, newContent) {
    const content = await this.app.vault.adapter.read(file);
    const lines = content.split("\n");
    lines[line] = newContent;
    await this.app.vault.adapter.write(file, lines.join("\n"));
  }
  async deleteTask(file, line) {
    const content = await this.app.vault.adapter.read(file);
    const lines = content.split("\n");
    lines.splice(line, 1);
    await this.app.vault.adapter.write(file, lines.join("\n"));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// functions/processInbox.ts
async function processInbox() {
  let tasks;
  const filePath = "GTD/Inbox.md";
  try {
    const fileContent = await this.app.vault.adapter.read(filePath);
    const tasks2 = fileContent.split("\n").filter((line) => line.startsWith("- [ ]"));
    return tasks2;
  } catch (error) {
    console.error("Failed to read file:", error);
  }
}

// functions/createGtdStructure.ts
async function createGtdStructure() {
  const vault = this.app.vault;
  const basePath = "GTD";
  const folders = [
    basePath,
    `${basePath}/1. Projects`,
    `${basePath}/2. Stay`,
    `${basePath}/3. Someday`,
    `${basePath}/4. Archive`
  ];
  const files = [
    { name: `${basePath}/Inbox.md`, data: "" },
    { name: `${basePath}/Documentation.md`, data: "" },
    { name: `${basePath}/Follow.md`, data: "" }
  ];
  try {
    for await (const folder of folders) {
      try {
        await vault.createFolder(folder);
      } catch (e) {
        console.log(`Folder ${folder} already exists.`);
      }
    }
    for await (const file of files) {
      const { name, data } = file;
      try {
        await vault.create(`${name}`, `${data}`);
      } catch (e) {
        console.log(`File file already exists.`);
      }
    }
    return true;
  } catch (e) {
    return false;
  }
}

// main.ts
var MyPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    this.addCommand({
      id: "open-task-manager-modal",
      name: "Open Task Manager Modal",
      callback: () => {
        new TaskManagerModal(this.app).open();
      }
    });
    this.addRibbonIcon("calendar-clock", "Open Task Manager Modal", () => {
      new TaskManagerModal(this.app).open();
    });
    this.addCommand({
      id: "process-someday",
      name: "Process Someday",
      callback: () => {
        new ProcessFileModal(this.app).open();
      }
    });
    this.addRibbonIcon("arrow-down-up", "Process Someday", () => {
      new ProcessFileModal(this.app).open();
    });
    this.addCommand({
      id: "process-inbox",
      name: "process Inbox",
      callback: () => {
        processInbox().then((tasks) => {
          new ProcessInboxModal(this.app, tasks).open();
        });
      }
    });
    this.addRibbonIcon("folder-output", "process Inbox", () => {
      processInbox().then((tasks) => {
        new ProcessInboxModal(this.app, tasks).open();
      });
    });
    this.addCommand({
      id: "Create_Gtd_Structure",
      name: "Create Gtd Structure",
      callback: () => {
        createGtdStructure().then((result) => {
          if (result) {
            new import_obsidian5.Notice("GTD structure created!");
          } else {
            new import_obsidian5.Notice("Error");
          }
        });
      }
    });
    this.addCommand({
      id: "Add_Task_Inbox",
      name: "Add Task to Inbox",
      callback: () => {
        new AddTaskToInboxModal(this.app).open();
      }
    });
    this.addRibbonIcon("package-plus", "Add Task to Inbox", () => {
      new AddTaskToInboxModal(this.app).open();
    });
  }
  onunload() {
    new import_obsidian5.Notice("unloading plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJtb2RhbHMvcHJvY2Vzc0luYm94TW9kYWwudHMiLCAibW9kYWxzL2FkZFRhc2tUb0luYm94TW9kYWwudHMiLCAibW9kYWxzL3Byb2Nlc3NGaWxlTW9kYWwudHMiLCAibW9kYWxzL3Rhc2tNYW5hZ2VyTW9kYWwudHMiLCAiZnVuY3Rpb25zL3Byb2Nlc3NJbmJveC50cyIsICJmdW5jdGlvbnMvY3JlYXRlR3RkU3RydWN0dXJlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIE1PREFMU1xyXG5pbXBvcnQgeyBQcm9jZXNzSW5ib3hNb2RhbCB9IGZyb20gJy4vbW9kYWxzL3Byb2Nlc3NJbmJveE1vZGFsJztcclxuaW1wb3J0IHsgQWRkVGFza1RvSW5ib3hNb2RhbCB9IGZyb20gJy4vbW9kYWxzL2FkZFRhc2tUb0luYm94TW9kYWwnO1xyXG5pbXBvcnQgeyBQcm9jZXNzRmlsZU1vZGFsIH0gZnJvbSAnbW9kYWxzL3Byb2Nlc3NGaWxlTW9kYWwnO1xyXG5pbXBvcnQgeyBUYXNrTWFuYWdlck1vZGFsIH0gZnJvbSAnbW9kYWxzL3Rhc2tNYW5hZ2VyTW9kYWwnO1xyXG5cclxuLy9GVU5DVElPTlNcclxuaW1wb3J0IHsgcHJvY2Vzc0luYm94IH0gZnJvbSAnZnVuY3Rpb25zL3Byb2Nlc3NJbmJveCc7XHJcbmltcG9ydCB7IGNyZWF0ZUd0ZFN0cnVjdHVyZSB9IGZyb20gJ2Z1bmN0aW9ucy9jcmVhdGVHdGRTdHJ1Y3R1cmUnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ29wZW4tdGFzay1tYW5hZ2VyLW1vZGFsJyxcclxuICAgICAgICAgICAgbmFtZTogJ09wZW4gVGFzayBNYW5hZ2VyIE1vZGFsJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICBuZXcgVGFza01hbmFnZXJNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdjYWxlbmRhci1jbG9jaycsICdPcGVuIFRhc2sgTWFuYWdlciBNb2RhbCcsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IFRhc2tNYW5hZ2VyTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAncHJvY2Vzcy1zb21lZGF5JyxcclxuICAgICAgICAgICAgbmFtZTogJ1Byb2Nlc3MgU29tZWRheScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgbmV3IFByb2Nlc3NGaWxlTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignYXJyb3ctZG93bi11cCcsICdQcm9jZXNzIFNvbWVkYXknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBQcm9jZXNzRmlsZU1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ3Byb2Nlc3MtaW5ib3gnLFxyXG4gICAgICAgICAgICBuYW1lOiAncHJvY2VzcyBJbmJveCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzSW5ib3goKS50aGVuKCB0YXNrcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFByb2Nlc3NJbmJveE1vZGFsKHRoaXMuYXBwLCB0YXNrcykub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2ZvbGRlci1vdXRwdXQnLCAncHJvY2VzcyBJbmJveCcsICgpID0+IHtcclxuICAgICAgICAgICAgcHJvY2Vzc0luYm94KCkudGhlbiggdGFza3MgPT4ge1xyXG4gICAgICAgICAgICAgICAgbmV3IFByb2Nlc3NJbmJveE1vZGFsKHRoaXMuYXBwLCB0YXNrcykub3BlbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiBcIkNyZWF0ZV9HdGRfU3RydWN0dXJlXCIsXHJcbiAgICAgICAgICAgIG5hbWU6IFwiQ3JlYXRlIEd0ZCBTdHJ1Y3R1cmVcIixcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUd0ZFN0cnVjdHVyZSgpLnRoZW4oIHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnR1REIHN0cnVjdHVyZSBjcmVhdGVkIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ0FkZF9UYXNrX0luYm94JyxcclxuICAgICAgICAgICAgbmFtZTogJ0FkZCBUYXNrIHRvIEluYm94JyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIG5ldyBBZGRUYXNrVG9JbmJveE1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdwYWNrYWdlLXBsdXMnLCAnQWRkIFRhc2sgdG8gSW5ib3gnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5ldyBBZGRUYXNrVG9JbmJveE1vZGFsKHRoaXMuYXBwKS5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG4gICAgICAgIG5ldyBOb3RpY2UoJ3VubG9hZGluZyBwbHVnaW4nKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVGV4dENvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBOb3RpY2UsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvY2Vzc0luYm94TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgdGFza3M6IHN0cmluZ1tdO1xyXG4gIHNlbGVjdGVkRm9sZGVyOiBzdHJpbmcgPSAnZGVmYXVsdCc7XHJcbiAgc2VsZWN0ZWRGaWxlOiBzdHJpbmcgPSAnZGVmYXVsdCc7XHJcbiAgbmV3RmlsZU5hbWU6IHN0cmluZztcclxuICB0YXNrVGFnOiBzdHJpbmc7XHJcbiAgdGFza1RpbWU6IHN0cmluZztcclxuICB0YXNrRGF0ZTogc3RyaW5nO1xyXG4gIHRhc2tIb3VyOiBzdHJpbmc7XHJcblxyXG4gIHRhc2s6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhc2tzOiBzdHJpbmdbXSkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuICAgIHRoaXMudGFza3MgPSB0YXNrcztcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uT3BlbigpIHtcclxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1Rhc2tzJyB9KTtcclxuXHJcbiAgICBmb3IgKGxldCB0YXNrIG9mIHRoaXMudGFza3MpIHtcclxuICAgICAgY29uc3QgdGFza0RpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuICAgICAgdGFza0Rpdi5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGFzayB9KTtcclxuXHJcbiAgICAgIC8vc2VsZWN0b3IgZGUgY2FycGV0YS9hcmNoaXZvXHJcbiAgICAgIG5ldyBTZXR0aW5nKHRhc2tEaXYpXHJcbiAgICAgICAgLnNldE5hbWUoJ1NlbGVjdCB0aGUgZGVzdGluYXRpb24nKVxyXG4gICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJ2RlZmF1bHQnLCAnJyk7XHJcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJzEuIFByb2plY3RzJywgJ1Byb2plY3RzJyk7XHJcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJzIuIFN0YXknLCAnU3RheScpO1xyXG4gICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCczLiBTb21lZGF5JywgJ1NvbWVkYXknKTtcclxuICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignRm9sbG93JywgJ0ZvbGxvdycpO1xyXG5cclxuICAgICAgICAgIGxldCBmaWxlRHJvcGRvd24gPSBuZXcgU2V0dGluZyh0YXNrRGl2KTtcclxuICAgICAgICAgIGxldCBmaWxlTmFtZSA9IG5ldyBTZXR0aW5nKHRhc2tEaXYpO1xyXG4gICAgICAgICAgbGV0IHRhZyA9IG5ldyBTZXR0aW5nKHRhc2tEaXYpO1xyXG4gICAgICAgICAgbGV0IHRpbWUgPSBuZXcgU2V0dGluZyh0YXNrRGl2KTtcclxuICAgICAgICAgIGxldCBkYXRlID0gbmV3IFNldHRpbmcodGFza0Rpdik7XHJcbiAgICAgICAgICBsZXQgaG91ciA9IG5ldyBTZXR0aW5nKHRhc2tEaXYpO1xyXG5cclxuICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZvbGRlciA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgZmlsZURyb3Bkb3duLnNldE5hbWUoJycpLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGZpbGVOYW1lLnNldE5hbWUoJycpLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIHRhZy5zZXROYW1lKCcnKS5jbGVhcigpO1xyXG4gICAgICAgICAgICB0aW1lLnNldE5hbWUoJycpLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIGRhdGUuc2V0TmFtZSgnJykuY2xlYXIoKTtcclxuICAgICAgICAgICAgaG91ci5zZXROYW1lKCcnKS5jbGVhcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSAnRm9sbG93JyAmJiB2YWx1ZSAhPT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QoYEdURC8ke3ZhbHVlfWApO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoZmlsZXMuZmlsZXMpIHtcclxuICAgICAgICAgICAgICAgIGZpbGVEcm9wZG93bi5zZXROYW1lKCdTZWxlY3QgYSBwcm9qZWN0IG9yIGNyZWF0ZSBhIG5ldyBvbmUnKVxyXG4gICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZmlsZURyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlRHJvcGRvd24uYWRkT3B0aW9uKCdkZWZhdWx0JywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaWxlcy5maWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZmlsZURyb3Bkb3duLmFkZE9wdGlvbihmaWxlLCB0aGlzLmdldExhc3RQYXJ0KGZpbGUpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZURyb3Bkb3duLm9uQ2hhbmdlKGZpbGVWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGZpbGVWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmaWxlTmFtZVxyXG4gICAgICAgICAgICAgIC5zZXROYW1lKCdQcm9qZWN0IG5hbWUgaWYgeW91IGRvIG5vdCBoYXZlIG9uZSBzZWxlY3RlZCcpXHJcbiAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5uZXdGaWxlTmFtZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUQUdcclxuICAgICAgICAgICAgdGFnLnNldE5hbWUoJ1RhZycpXHJcbiAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50YXNrVGFnID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5zZXR0aW5nRWwuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsICd0cnVlJylcclxuICAgICAgICAgICAgICA7XHJcblxyXG4gICAgICAgICAgICAvLyBEVVJBVElPTiBUSU1FXHJcbiAgICAgICAgICAgIHRpbWUuc2V0TmFtZSgnRHVyYXRpb24gdGltZScpXHJcbiAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy50YXNrVGltZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEQVRFXHJcbiAgICAgICAgICAgIGRhdGUuc2V0TmFtZSgnRGF0ZScpXHJcbiAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2RhdGUnKTtcclxuICAgICAgICAgICAgICAgIHRleHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRhc2tEYXRlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEhPVVJcclxuICAgICAgICAgICAgaG91ci5zZXROYW1lKCdIb3VyJylcclxuICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGltZScpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudGFza0hvdXIgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gQlROIFBST0NFU1NcclxuICAgICAgICAgIHRhc2tEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Byb2Nlc3MnIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGFzayh0YXNrKTtcclxuICAgICAgICAgICAgdGFza0Rpdi5lbXB0eSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBnZXRMYXN0UGFydCh0ZXh0OiBzdHJpbmcpIHtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBsYXN0U2xhc2hJbmRleCA9IHRleHQubGFzdEluZGV4T2YoJy8nKTtcclxuICAgICAgaWYgKGxhc3RTbGFzaEluZGV4ID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZyhsYXN0U2xhc2hJbmRleCArIDEpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgYXN5bmMgYWRkVGFza1RvRmlsZSh0ZXh0OiBzdHJpbmcsIGZpbGVQYXRoOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cclxuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdGV4dC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cclxuICAgICAgICBjb25zdCBpbnNlcnRQb3NpdGlvbiA9IGNvbnRlbnQuaW5kZXhPZignIyBEb25lJyk7XHJcbiAgICAgICAgaWYgKGluc2VydFBvc2l0aW9uICE9PSAtMSkge1xyXG4gICAgICAgICAgY29uc3QgYmVmb3JlID0gY29udGVudC5zdWJzdHJpbmcoMCwgaW5zZXJ0UG9zaXRpb24pO1xyXG4gICAgICAgICAgY29uc3QgYWZ0ZXIgPSBjb250ZW50LnN1YnN0cmluZyhpbnNlcnRQb3NpdGlvbik7XHJcbiAgICAgICAgICBjb250ZW50ID0gYmVmb3JlICsgdGV4dCArICdcXG4nICsgYWZ0ZXI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnRlbnQgKz0gJ1xcbicgKyB0ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UoJ1Rhc2sgYWRkZWQnKTtcclxuXHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdFUlJPUicpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgJHtlfWApXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhc3luYyBkZWxldGVUYXNrRnJvbUZpbGUoZmlsZVBhdGg6IHN0cmluZywgdGFza1RvRGVsZXRlOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcclxuICAgICAgY29uc3QgbGluZXMgPSBmaWxlQ29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpICE9PSB0YXNrVG9EZWxldGUudHJpbSgpKTtcclxuICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSB1cGRhdGVkTGluZXMuam9pbignXFxuJyk7XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCB1cGRhdGVkQ29udGVudCk7XHJcbiAgICAgIG5ldyBOb3RpY2UgKGBUYXNrIGRlbGV0ZWQ6ICR7dGFza1RvRGVsZXRlfWApO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSB0YXNrOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhc3luYyBjcmVhdGVQcm95ZWN0KHBhdGg6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZywgZGF0YTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBuZXdGaWxlUGF0aCA9IGBHVEQvJHtwYXRofS8ke2ZpbGVOYW1lfS5tZGA7XHJcbiAgICBjb25zdCB2YXVsdCA9IHRoaXMuYXBwLnZhdWx0O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZShuZXdGaWxlUGF0aCwgYCR7ZGF0YX1cXG4jIERvbmVgKTtcclxuICAgICAgbmV3IE5vdGljZSgnTmV3IHByb2plY3QgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgbmV3IE5vdGljZSgnRXJyb3InKTtcclxuICAgICAgY29uc29sZS5sb2coYEZpbGUgJHtuZXdGaWxlUGF0aH0gYWxyZWFkeSBleGlzdHMuYCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld0ZpbGVQYXRoO1xyXG4gIH1cclxuXHJcblxyXG4gIGFzeW5jIHByb2Nlc3NUYXNrKHRhc2s6IHN0cmluZykge1xyXG4gICAgY29uc3QgZm9ybWF0dGVkVGFzayA9IGAke3Rhc2t9ICMke3RoaXMudGFza1RhZ30gKioke3RoaXMudGFza1RpbWV9KiogXHVEODNEXHVEQ0M1ICR7dGhpcy50YXNrRGF0ZX0gW2hvdXI6OiR7dGhpcy50YXNrSG91cn1dYDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZEZvbGRlciA9PT0gJ0ZvbGxvdycpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmFkZFRhc2tUb0ZpbGUoZm9ybWF0dGVkVGFzaywgYEdURC8ke3RoaXMuc2VsZWN0ZWRGb2xkZXJ9Lm1kYCk7XHJcbiAgXHJcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZEZpbGUgPT09ICdkZWZhdWx0Jykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUHJveWVjdCh0aGlzLnNlbGVjdGVkRm9sZGVyLCB0aGlzLm5ld0ZpbGVOYW1lLCBmb3JtYXR0ZWRUYXNrKTtcclxuICBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmFkZFRhc2tUb0ZpbGUoZm9ybWF0dGVkVGFzaywgdGhpcy5zZWxlY3RlZEZpbGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmRlbGV0ZVRhc2tGcm9tRmlsZSgnR1REL0luYm94Lm1kJywgdGFzayk7XHJcbiAgICB9XHJcbiAgICBjYXRjaChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYW5kbGluZyB0YXNrOicsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2xvc2UoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBUZXh0Q29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkVGFza1RvSW5ib3hNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICB0ZXh0OiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICBzdXBlcihhcHApO1xyXG4gIH1cclxuXHJcbiAgb25PcGVuKCkge1xyXG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0FkZCB0YXNrJyB9KTtcclxuXHJcbiAgICBjb25zdCB0ZXh0Q29tcG9uZW50ID0gbmV3IFRleHRDb21wb25lbnQoY29udGVudEVsKTtcclxuICAgIHRleHRDb21wb25lbnQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG4gICAgICB0aGlzLnRleHQgPSB2YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGVudEVsKTtcclxuICAgIHN1Ym1pdEJ1dHRvbi5zZXRCdXR0b25UZXh0KCdBZGQnKS5vbkNsaWNrKCgpID0+IHtcclxuXHJcbiAgICAgIGFkZFRhc2tUb0lib3godGhpcy50ZXh0LCBURmlsZSk7XHJcblxyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uQ2xvc2UoKSB7XHJcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYWRkVGFza1RvSWJveCh0ZXh0OiBzdHJpbmcsIFRGaWxlOiBhbnkpIHtcclxuICBjb25zdCBmaWxlUGF0aCA9ICdHVEQvSW5ib3gubWQnO1xyXG4gIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cclxuICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIHRleHQudHJpbSgpICE9PSAnJykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICAgdGV4dCA9IGAtIFsgXSAke3RleHR9YDtcclxuICAgICAgICAgIGxldCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBpbnNlcnRQb3NpdGlvbiA9IGNvbnRlbnQuaW5kZXhPZignIyBEb25lJyk7XHJcbiAgICAgICAgICBpZiAoaW5zZXJ0UG9zaXRpb24gIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYmVmb3JlID0gY29udGVudC5zdWJzdHJpbmcoMCwgaW5zZXJ0UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGFmdGVyID0gY29udGVudC5zdWJzdHJpbmcoaW5zZXJ0UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBiZWZvcmUgKyB0ZXh0ICsgJ1xcbicgKyBhZnRlcjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29udGVudCArPSAnXFxuJyArIHRleHQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgXHJcbiAgICAgIH1cclxuICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciAke2V9YClcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICB9XHJcbn0iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvY2Vzc0ZpbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHNlbGVjdGVkRmlsZTogc3RyaW5nO1xyXG4gICAgc2VsZWN0ZWREZXN0aW5hdGlvbjogc3RyaW5nID0gJ2RlZmF1bHQnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGgyID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01vdmUgb3IgRGVsZXRlIFByb3llY3QnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrRGl2UGFyZW50ID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIHRhc2tEaXZQYXJlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDZDOEMnO1xyXG5cclxuICAgICAgICBjb25zdCB0YXNrRGl2ID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyh0YXNrRGl2UGFyZW50KVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU2VsZWN0IGZvbGRlciB0byBwcm9jZXNzJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZGVmYXVsdCcsICcnKTtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignMi4gU3RheScsICdTdGF5Jyk7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJzMuIFNvbWVkYXknLCAnU29tZWRheScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0YXNrRGl2LmVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBgR1RELyR7dmFsdWV9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QoZm9sZGVyUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVMaXN0ID0gZmlsZXMuZmlsZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBmaWxlcyBmb3VuZCBpbiB0aGUgU29tZWRheSBmb2xkZXIuJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdGFzayBvZiBmaWxlTGlzdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tEaXYuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiB0aGlzLmdldExhc3RQYXJ0KHRhc2spIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhc2tEaXYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1NlbGVjdCB0aGUgZGVzdGluYXRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbignZGVmYXVsdCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKCcxLiBQcm9qZWN0cycsICdQcm9qZWN0cycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJzIuIFN0YXknLCAnU3RheScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJzQuIEFyY2hpdmUnLCAnQXJjaGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERlc3RpbmF0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnTW92ZScgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2sgJiYgdGhpcy5zZWxlY3RlZERlc3RpbmF0aW9uICE9PSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3ZlRmlsZSh0YXNrLCB0aGlzLnNlbGVjdGVkRGVzdGluYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza0Rpdi5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYSBmaWxlIGFuZCBmb2xkZXIgZmlyc3QuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuRGVsZXRlID0gdGFza0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRGVsZXRlJyB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG5EZWxldGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNEQTEwMTAnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZUZpbGUodGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgJHt0YXNrfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrRGl2LmVtcHR5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3QgYSBmaWxlIGZpcnN0LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgYXN5bmMgbW92ZUZpbGUoZmlsZTogc3RyaW5nLCBkZXN0aW5hdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3Qgc291cmNlUGF0aCA9IGZpbGU7XHJcbiAgICAgICAgY29uc3QgZGVzdGluYXRpb25QYXRoID0gYEdURC8ke2Rlc3RpbmF0aW9ufS8ke3RoaXMuZ2V0TGFzdFBhcnQoZmlsZSl9YDtcclxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChzb3VyY2VQYXRoKTtcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGAke2Rlc3RpbmF0aW9uUGF0aH0vYCwgYCR7ZmlsZUNvbnRlbnR9YCk7XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlRmlsZShmaWxlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXN0UGFydCh0ZXh0OiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbGFzdFNsYXNoSW5kZXggPSB0ZXh0Lmxhc3RJbmRleE9mKCcvJyk7XHJcbiAgICAgICAgICAgIGlmIChsYXN0U2xhc2hJbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZyhsYXN0U2xhc2hJbmRleCArIDEpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBkZWxldGVGaWxlKGZpbGU6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUoZmlsZVBhdGgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZmlsZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nXHJcblxyXG5leHBvcnQgY2xhc3MgVGFza01hbmFnZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uT3BlbigpIHtcclxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01hbmFnZSBUYXNrcycgfSk7XHJcblxyXG4gICAgY29uc3QgZm9sZGVyUGF0aHMgPSBbJ0dURC8xLiBQcm9qZWN0cycsICdHVEQvMi4gU3RheScsICdHVEQvMy4gU29tZWRheSddOyAvLyBBY3R1YWxpemEgZXN0YXMgcnV0YXMgY29uIGxhcyBjYXJwZXRhcyBlc3BlY1x1MDBFRGZpY2FzXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gTGVlciB0b2RhcyBsYXMgdGFyZWFzIGRlIGxhcyBjYXJwZXRhcyBlc3BlY2lmaWNhZGFzXHJcbiAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5yZWFkVGFza3NGcm9tRm9sZGVycyhmb2xkZXJQYXRocyk7XHJcblxyXG4gICAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gdGFza3MgZm91bmQuJyB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVUYXNrRWxlbWVudCh0YXNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVhZCB0YXNrczonLCBlcnJvcik7XHJcbiAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0ZhaWxlZCB0byBsb2FkIHRhc2tzLicgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyByZWFkVGFza3NGcm9tRm9sZGVycyhmb2xkZXJzOiBzdHJpbmdbXSk6IFByb21pc2U8eyBmaWxlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgbGluZTogbnVtYmVyIH1bXT4ge1xyXG4gICAgY29uc3QgdGFza3M6IHsgZmlsZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IGxpbmU6IG51bWJlciB9W10gPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGZvbGRlciBvZiBmb2xkZXJzKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5saXN0KGZvbGRlcik7XHJcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcy5maWxlcykge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZSk7XHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgaWYgKGxpbmUubWF0Y2goLy0gXFxbIFxcXS4qXHVEODNEXHVEQ0M1IFxcZHs0fS1cXGR7Mn0tXFxkezJ9LykpIHtcclxuICAgICAgICAgICAgdGFza3MucHVzaCh7IGZpbGUsIGNvbnRlbnQ6IGxpbmUsIGxpbmU6IGluZGV4IH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRhc2tzO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlVGFza0VsZW1lbnQodGFzazogeyBmaWxlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgbGluZTogbnVtYmVyIH0pIHtcclxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuICAgIGNvbnN0IHRhc2tFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd0YXNrLWl0ZW0nIH0pO1xyXG4gIFxyXG4gICAgY29uc3QgZGF0ZU1hdGNoID0gdGFzay5jb250ZW50Lm1hdGNoKC9cdUQ4M0RcdURDQzUgKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pO1xyXG4gICAgaWYgKGRhdGVNYXRjaCkge1xyXG4gICAgICBjb25zdCB0YXNrRGF0ZSA9IG5ldyBEYXRlKGRhdGVNYXRjaFsxXSk7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgIGlmICh0YXNrRGF0ZSA8IGN1cnJlbnREYXRlKSB7XHJcbiAgICAgICAgdGFza0VsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB0YXNrLmNvbnRlbnQgfSk7XHJcbiAgICAgICAgdGFza0VsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnIChPdmVyZHVlKScsIGNsczogJ292ZXJkdWUnIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlSW5wdXQgPSB0YXNrRWwuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnZGF0ZScgfSk7XHJcbiAgICAgICAgZGF0ZUlucHV0LnZhbHVlID0gZGF0ZU1hdGNoWzFdO1xyXG5cclxuICAgICAgICBjb25zdCB1cGRhdGVCdXR0b24gPSB0YXNrRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1VwZGF0ZSBEYXRlJyB9KTtcclxuICAgICAgICB1cGRhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBuZXdEYXRlID0gZGF0ZUlucHV0LnZhbHVlO1xyXG5cclxuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlVGFzayh0YXNrLmZpbGUsIHRhc2subGluZSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gdGFzay5jb250ZW50LnJlcGxhY2UoL1x1RDgzRFx1RENDNSBcXGR7NH0tXFxkezJ9LVxcZHsyfS8sIGBcdUQ4M0RcdURDQzUgJHtuZXdEYXRlfWApO1xyXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVUYXNrKHRhc2suZmlsZSwgdGFzay5saW5lLCB1cGRhdGVkQ29udGVudCk7XHJcbiAgICAgICAgICBuZXcgTm90aWNlKCdUYXNrIGRhdGUgdXBkYXRlZC4nKTtcclxuXHJcbiAgICAgICAgICB0YXNrRWwuZW1wdHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGFza0VsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEZWxldGUgVGFzaycgfSk7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjREExMDEwJztcclxuICAgICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGV0ZVRhc2sodGFzay5maWxlLCB0YXNrLmxpbmUpO1xyXG4gICAgICAgICAgbmV3IE5vdGljZSgnVGFzayBkZWxldGVkLicpO1xyXG5cclxuICAgICAgICAgIHRhc2tFbC5lbXB0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVUYXNrKGZpbGU6IHN0cmluZywgbGluZTogbnVtYmVyLCBuZXdDb250ZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZSk7XHJcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gICAgbGluZXNbbGluZV0gPSBuZXdDb250ZW50O1xyXG4gICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlLCBsaW5lcy5qb2luKCdcXG4nKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVUYXNrKGZpbGU6IHN0cmluZywgbGluZTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGUpO1xyXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgIGxpbmVzLnNwbGljZShsaW5lLCAxKTtcclxuICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZSwgbGluZXMuam9pbignXFxuJykpO1xyXG4gIH1cclxuXHJcbiAgb25DbG9zZSgpIHtcclxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgfVxyXG59IiwgImV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzSW5ib3goKSB7XHJcbiAgICAgICAgbGV0IHRhc2tzOiBzdHJpbmdbXTtcclxuICAgICAgICBjb25zdCBmaWxlUGF0aCA9ICdHVEQvSW5ib3gubWQnO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgY29uc3QgdGFza3MgPSBmaWxlQ29udGVudC5zcGxpdCgnXFxuJykuZmlsdGVyKChsaW5lOiBzdHJpbmcpID0+IGxpbmUuc3RhcnRzV2l0aCgnLSBbIF0nKSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiB0YXNrcztcclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVhZCBmaWxlOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0iLCAiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUd0ZFN0cnVjdHVyZSgpIHtcclxuICAgIGNvbnN0IHZhdWx0ID0gdGhpcy5hcHAudmF1bHQ7XHJcbiAgICBjb25zdCBiYXNlUGF0aCA9ICdHVEQnO1xyXG5cclxuICAgIGNvbnN0IGZvbGRlcnMgPSBbXHJcbiAgICAgICAgYmFzZVBhdGgsXHJcbiAgICAgICAgYCR7YmFzZVBhdGh9LzEuIFByb2plY3RzYCxcclxuICAgICAgICBgJHtiYXNlUGF0aH0vMi4gU3RheWAsXHJcbiAgICAgICAgYCR7YmFzZVBhdGh9LzMuIFNvbWVkYXlgLFxyXG4gICAgICAgIGAke2Jhc2VQYXRofS80LiBBcmNoaXZlYFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBmaWxlcyA9IFtcclxuICAgICAgICB7IG5hbWU6IGAke2Jhc2VQYXRofS9JbmJveC5tZGAsIGRhdGE6ICcnIH0sXHJcbiAgICAgICAgeyBuYW1lOiBgJHtiYXNlUGF0aH0vRG9jdW1lbnRhdGlvbi5tZGAsIGRhdGE6ICcnIH0sXHJcbiAgICAgICAgeyBuYW1lOiBgJHtiYXNlUGF0aH0vRm9sbG93Lm1kYCwgZGF0YTogJycgfVxyXG4gICAgXTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZm9sZGVyIG9mIGZvbGRlcnMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb2xkZXIgJHtmb2xkZXJ9IGFscmVhZHkgZXhpc3RzLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgZGF0YSB9ID0gZmlsZTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHZhdWx0LmNyZWF0ZShgJHtuYW1lfWAsIGAke2RhdGF9YCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGaWxlIGZpbGUgYWxyZWFkeSBleGlzdHMuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goZSl7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUErQjs7O0FDQS9CLHNCQUFtRjtBQUU1RSxJQUFNLG9CQUFOLGNBQWdDLHNCQUFNO0FBQUEsRUFZM0MsWUFBWSxLQUFVLE9BQWlCO0FBQ3JDLFVBQU0sR0FBRztBQVhYLDBCQUF5QjtBQUN6Qix3QkFBdUI7QUFXckIsU0FBSyxRQUFRO0FBQUEsRUFDZjtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2IsVUFBTSxFQUFFLFVBQVUsSUFBSTtBQUN0QixjQUFVLE1BQU07QUFFaEIsY0FBVSxTQUFTLE1BQU0sRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUUxQyxhQUFTLFFBQVEsS0FBSyxPQUFPO0FBQzNCLFlBQU0sVUFBVSxVQUFVLFVB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QSxNQUNOLFVBQVUsTUFBTTtBQUNaLHFCQUFhLEVBQUUsS0FBTSxXQUFTO0FBQzFCLGNBQUksa0JBQWtCLEtBQUssS0FBSyxLQUFLLEVBQUUsS0FBSztBQUFBLFFBQ2hELENBQUM7QUFBQSxNQUNMO0FBQUEsSUFDRixDQUFDO0FBRUgsU0FBSyxjQUFjLGlCQUFpQixpQkFBaUIsTUFBTTtBQUN2RCxtQkFBYSxFQUFFLEtBQU0sV0FBUztBQUMxQixZQUFJLGtCQUFrQixLQUFLLEtBQUssS0FBSyxFQUFFLEtBQUs7QUFBQSxNQUNoRCxDQUFDO0FBQUEsSUFDTCxDQUFDO0FBR0QsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDWiwyQkFBbUIsRUFBRSxLQUFNLFlBQVU7QUFDakMsY0FBRyxRQUFPO0FBQ04sZ0JBQUksd0JBQU8sd0JBQXdCO0FBQUEsVUFDdkMsT0FDSztBQUNELGdCQUFJLHdCQUFPLE9BQU87QUFBQSxVQUN0QjtBQUFBLFFBQ0osQ0FBQztBQUFBLE1BQ0w7QUFBQSxJQUNKLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNaLFlBQUksb0JBQW9CLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFBQSxNQUMzQztBQUFBLElBQ0osQ0FBQztBQUVELFNBQUssY0FBYyxnQkFBZ0IscUJBQXFCLE1BQU07QUFDMUQsVUFBSSxvQkFBb0IsS0FBSyxHQUFHLEVBQUUsS0FBSztBQUFBLElBQzNDLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFHQSxXQUFXO0FBQ1AsUUFBSSx3QkFBTyxrQkFBa0I7QUFBQSxFQUNqQztBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZmlsZURyb3Bkb3duIiwgInZhbHVlIiwgImltcG9ydF9vYnNpZGlhbiIsICJURmlsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZHJvcGRvd24iLCAidmFsdWUiLCAiaW1wb3J0X29ic2lkaWFuIiwgInRhc2tzIl0KfQo=
